const _0x5cb642=_0x223c;(function(_0x5d28b9,_0x2c86c3){const _0x4b5106=_0x223c,_0x33529e=_0x5d28b9();while(!![]){try{const _0xcb1bfa=parseInt(_0x4b5106(0xe2))/0x1+-parseInt(_0x4b5106(0xbb))/0x2+parseInt(_0x4b5106(0xd2))/0x3+parseInt(_0x4b5106(0xec))/0x4*(parseInt(_0x4b5106(0xd9))/0x5)+parseInt(_0x4b5106(0xfc))/0x6+parseInt(_0x4b5106(0xb9))/0x7+parseInt(_0x4b5106(0xbd))/0x8*(-parseInt(_0x4b5106(0xf2))/0x9);if(_0xcb1bfa===_0x2c86c3)break;else _0x33529e['push'](_0x33529e['shift']());}catch(_0x2339f2){_0x33529e['push'](_0x33529e['shift']());}}}(_0x5d3b,0x991b2));import{connect}from'cloudflare:sockets';const listProxy=[{'path':'/sg','proxy':_0x5cb642(0x102)}];function _0x5d3b(){const _0x33feeb=['arrayBuffer','95065DKNrIr','addEventListener','writable','push','catch','getUint16','isp','readableWebSocketStream\x20is\x20abort',':80?path=','433539odkrYf','\x0a\x0a=====================================\x0a\x0aNTLS:\x0a\x0a','enqueue','\x0a\x0a=====================================\x0a\x0aVLESS\x20ACCOUNT\x20INFORMATION\x0a\x0a=====================================\x0a\x0aÂ»\x20Domain\x20\x20\x20\x20\x20\x20:\x20','invalid\x20data','country_code','vless://ðŸ‡®ðŸ‡©@','\x0a\x0aÂ»\x20City\x20\x20\x20\x20\x20\x20\x20\x20:\x20','country','webSocket.readyState\x20is\x20not\x20open,\x20maybe\x20close','180moihhM','buffer','\x0a\x0a=====================================\x0a\x0a','toString','command\x20','decode','63BRIoSE','releaseLock','data','remoteConnection!.readable\x20abort','path','slice','ReadableStream\x20was\x20canceled,\x20due\x20to\x20','\x0a\x0aÂ»\x20Port\x20TLS\x20\x20\x20\x20:\x20443\x0a\x0aÂ»\x20Port\x20NTLS\x20\x20\x20:\x2080\x0a\x0aÂ»\x20Security\x20\x20\x20\x20:\x20auto\x0a\x0aÂ»\x20Network\x20\x20\x20\x20\x20:\x20(WS)\x0a\x0aÂ»\x20Path\x20\x20\x20\x20\x20\x20\x20\x20:\x20','getWriter','json','1169016leBQwT','error','accept','readableWebSocketStream\x20pipeTo\x20error','write','invalid\x20user','8.222.222.64','random','Host','url','UDP\x20proxy\x20only\x20enable\x20for\x20DNS\x20which\x20is\x20port\x2053','&fp=randomized&type=ws&sni=','Terjadi\x20kesalahan\x20saat\x20membuat\x20konfigurasi\x20VLESS.','stringify','close','retry\x20tcpSocket\x20closed\x20error','\x0a\x0aÂ»\x20Country\x20\x20\x20\x20\x20:\x20','\x0a\x0a=====================================\x0a\x0aTLS:\x0a\x0a','addressValue\x20is\x20empty,\x20addressType\x20is\x20','readyState','websocket','837354oOkFLk','value','1818062UcBXdy','headers','569904XwVNcW','retry','readable','pathname','closed','\x20is\x20not\x20support,\x20command\x2001-tcp,02-udp,03-mux','city','text/plain;charset=utf-8','stack','get','readableWebSocketStream\x20is\x20close','join','application/dns-message','send','remoteConnection!.readable\x20is\x20close\x20with\x20hasIncomingData\x20is\x20','pipeTo','charCodeAt','\x0a\x0aÂ»\x20ISP\x20\x20\x20\x20\x20\x20\x20\x20\x20:\x20','connected\x20to\x20','proxy','byteLength','1293711wbLyYo','replace','remoteSocketToWS\x20has\x20exception\x20','from','&security=none&encryption=none&host=','https://1.1.1.1/dns-query'];_0x5d3b=function(){return _0x33feeb;};return _0x5d3b();}let proxyIP;export default{async 'fetch'(_0xd6cf98,_0x1b959f){const _0x5adc61=_0x5cb642;try{proxyIP=proxyIP;const _0x140122=new URL(_0xd6cf98[_0x5adc61(0x105)]),_0x4a1f59=_0xd6cf98[_0x5adc61(0xbc)]['get']('Upgrade'),_0x173b02=listProxy['find'](_0x59e7f5=>_0x140122[_0x5adc61(0xc0)]===_0x59e7f5[_0x5adc61(0xf6)]);if(_0x173b02){proxyIP=_0x173b02[_0x5adc61(0xd0)];if(_0x4a1f59===_0x5adc61(0xb8))return await vlessOverWSHandler(_0xd6cf98);else{const _0x851d0b=await getVLESSConfig(_0x173b02[_0x5adc61(0xf6)],_0xd6cf98['headers']['get'](_0x5adc61(0x104)),_0x173b02[_0x5adc61(0xd0)]);return new Response(_0x851d0b,{'status':0xc8,'headers':{'Content-Type':_0x5adc61(0xc4)}});}}return fetch(_0xd6cf98);}catch(_0x27c2b7){return new Response(_0x27c2b7[_0x5adc61(0xef)](),{'status':0x1f4});}}};async function getVLESSConfig(_0x3a0efb,_0x302cab,_0x6895ac){const _0x20f023=_0x5cb642;try{const _0x576ea2=await fetch('https://ipwhois.app/json/'+_0x6895ac),_0x51e092=await _0x576ea2[_0x20f023(0xfb)](),_0x3f5192=_0x51e092[_0x20f023(0xdf)],_0x71ef8c=_0x51e092[_0x20f023(0xea)],_0x16c324=_0x51e092[_0x20f023(0xc3)],_0x36b11a=_0x51e092[_0x20f023(0xe7)],_0xac967b=encodeURIComponent(_0x3a0efb),_0x3f19b8='vless://ðŸ‡®ðŸ‡©@'+_0x302cab+':443?encryption=none&security=tls&sni='+_0x302cab+'&fp=randomized&type=ws&host='+_0x302cab+'&path='+_0xac967b+'#'+_0x3f5192+'\x20('+_0x36b11a+')',_0x57cc6e=_0x20f023(0xe8)+_0x302cab+_0x20f023(0xe1)+_0xac967b+_0x20f023(0xd6)+_0x302cab+_0x20f023(0x107)+_0x302cab+'#'+_0x3f5192+'\x20('+_0x36b11a+')',_0x2629f5=_0x3f19b8[_0x20f023(0xd3)](/ /g,'+'),_0x3488e8=_0x57cc6e[_0x20f023(0xd3)](/ /g,'+');return _0x20f023(0xe5)+_0x302cab+_0x20f023(0xce)+_0x3f5192+_0x20f023(0xb4)+_0x71ef8c+_0x20f023(0xe9)+_0x16c324+_0x20f023(0xf9)+_0x3a0efb+_0x20f023(0xb5)+_0x2629f5+_0x20f023(0xe3)+_0x3488e8+_0x20f023(0xee);}catch(_0x120c72){return _0x20f023(0x108);}}async function vlessOverWSHandler(_0x5efba3){const _0x7dee51=_0x5cb642,_0x1f968b=new WebSocketPair(),[_0x300e67,_0x4cbf55]=Object['values'](_0x1f968b);_0x4cbf55[_0x7dee51(0xfe)]();let _0x286182='',_0x5636ab='';const _0x2b1098=(_0x5c08da,_0x387e5f)=>{console['log']('['+_0x286182+':'+_0x5636ab+']\x20'+_0x5c08da,_0x387e5f||'');},_0x185842=_0x5efba3[_0x7dee51(0xbc)][_0x7dee51(0xc6)]('sec-websocket-protocol')||'',_0x288147=makeReadableWebSocketStream(_0x4cbf55,_0x185842,_0x2b1098);let _0x1fe6fc={'value':null},_0x321728=null,_0x4e9933=![];return _0x288147[_0x7dee51(0xcc)](new WritableStream({async 'write'(_0x5bd7e4,_0x26b49d){const _0x1ff55a=_0x7dee51;if(_0x4e9933&&_0x321728)return _0x321728(_0x5bd7e4);if(_0x1fe6fc[_0x1ff55a(0xba)]){const _0x209358=_0x1fe6fc['value'][_0x1ff55a(0xdb)][_0x1ff55a(0xfa)]();await _0x209358[_0x1ff55a(0x100)](_0x5bd7e4),_0x209358[_0x1ff55a(0xf3)]();return;}const {hasError:_0x386013,message:_0x15c7db,portRemote:portRemote=0x1bb,addressRemote:addressRemote='',rawDataIndex:_0x268918,vlessVersion:vlessVersion=new Uint8Array([0x0,0x0]),isUDP:_0x3195df}=processVlessHeader(_0x5bd7e4);_0x286182=addressRemote,_0x5636ab=portRemote+'--'+Math[_0x1ff55a(0x103)]()+'\x20'+(_0x3195df?'udp\x20':'tcp\x20')+'\x20';if(_0x386013){throw new Error(_0x15c7db);return;}if(_0x3195df){if(portRemote===0x35)_0x4e9933=!![];else{throw new Error(_0x1ff55a(0x106));return;}}const _0x499b02=new Uint8Array([vlessVersion[0x0],0x0]),_0x4f0640=_0x5bd7e4[_0x1ff55a(0xf7)](_0x268918);if(_0x4e9933){const {write:_0x51a536}=await handleUDPOutBound(_0x4cbf55,_0x499b02,_0x2b1098);_0x321728=_0x51a536,_0x321728(_0x4f0640);return;}handleTCPOutBound(_0x1fe6fc,addressRemote,portRemote,_0x4f0640,_0x4cbf55,_0x499b02,_0x2b1098);},'close'(){const _0x4ce413=_0x7dee51;_0x2b1098(_0x4ce413(0xc7));},'abort'(_0x871757){const _0x148697=_0x7dee51;_0x2b1098(_0x148697(0xe0),JSON[_0x148697(0x109)](_0x871757));}}))[_0x7dee51(0xdd)](_0x4bb6c2=>{const _0x4cb66b=_0x7dee51;_0x2b1098(_0x4cb66b(0xff),_0x4bb6c2);}),new Response(null,{'status':0x65,'webSocket':_0x300e67});}async function handleTCPOutBound(_0x15b383,_0x14c9af,_0x5eb9f4,_0x10d788,_0x18d14d,_0x384d0d,_0x4eb797){async function _0x50c726(_0x54943c,_0x54b5c2){const _0x580bf9=_0x223c,_0x151100=connect({'hostname':_0x54943c,'port':_0x54b5c2});_0x15b383['value']=_0x151100,_0x4eb797(_0x580bf9(0xcf)+_0x54943c+':'+_0x54b5c2);const _0x2cfffb=_0x151100[_0x580bf9(0xdb)][_0x580bf9(0xfa)]();return await _0x2cfffb[_0x580bf9(0x100)](_0x10d788),_0x2cfffb['releaseLock'](),_0x151100;}async function _0x9c765c(){const _0x274d2d=_0x223c,_0x253107=await _0x50c726(proxyIP||_0x14c9af,_0x5eb9f4);_0x253107[_0x274d2d(0xc1)]['catch'](_0x2e1c23=>{const _0x47cc12=_0x274d2d;console['log'](_0x47cc12(0xb3),_0x2e1c23);})['finally'](()=>{safeCloseWebSocket(_0x18d14d);}),remoteSocketToWS(_0x253107,_0x18d14d,_0x384d0d,null,_0x4eb797);}const _0x33393b=await _0x50c726(_0x14c9af,_0x5eb9f4);remoteSocketToWS(_0x33393b,_0x18d14d,_0x384d0d,_0x9c765c,_0x4eb797);}function makeReadableWebSocketStream(_0xeb4a40,_0x360269,_0x38f35f){let _0xcee329=![];const _0x5e936f=new ReadableStream({'start'(_0x3f3a6c){const _0x7a1668=_0x223c;_0xeb4a40[_0x7a1668(0xda)]('message',_0x59bb14=>{const _0x21fd2a=_0x7a1668;if(_0xcee329)return;const _0x3aa3b4=_0x59bb14[_0x21fd2a(0xf4)];_0x3f3a6c[_0x21fd2a(0xe4)](_0x3aa3b4);}),_0xeb4a40[_0x7a1668(0xda)](_0x7a1668(0xb2),()=>{safeCloseWebSocket(_0xeb4a40);if(_0xcee329)return;_0x3f3a6c['close']();}),_0xeb4a40[_0x7a1668(0xda)]('error',_0x5ef502=>{const _0x4aa7cd=_0x7a1668;_0x38f35f('webSocketServer\x20has\x20error'),_0x3f3a6c[_0x4aa7cd(0xfd)](_0x5ef502);});const {earlyData:_0x128c37,error:_0x5c1064}=base64ToArrayBuffer(_0x360269);if(_0x5c1064)_0x3f3a6c[_0x7a1668(0xfd)](_0x5c1064);else _0x128c37&&_0x3f3a6c[_0x7a1668(0xe4)](_0x128c37);},'pull'(_0x26d960){},'cancel'(_0x3ed4b1){const _0x44ba55=_0x223c;if(_0xcee329)return;_0x38f35f(_0x44ba55(0xf8)+_0x3ed4b1),_0xcee329=!![],safeCloseWebSocket(_0xeb4a40);}});return _0x5e936f;}function processVlessHeader(_0x550bc2){const _0x29bb85=_0x5cb642;if(_0x550bc2[_0x29bb85(0xd1)]<0x18)return{'hasError':!![],'message':_0x29bb85(0xe6)};const _0x39e546=new Uint8Array(_0x550bc2[_0x29bb85(0xf7)](0x0,0x1));let _0x3552b3=!![],_0x943e2a=![];if(!_0x3552b3)return{'hasError':!![],'message':_0x29bb85(0x101)};const _0x565678=new Uint8Array(_0x550bc2[_0x29bb85(0xf7)](0x11,0x12))[0x0],_0x1887dc=new Uint8Array(_0x550bc2[_0x29bb85(0xf7)](0x12+_0x565678,0x12+_0x565678+0x1))[0x0];if(_0x1887dc===0x1){}else{if(_0x1887dc===0x2)_0x943e2a=!![];else return{'hasError':!![],'message':_0x29bb85(0xf0)+_0x1887dc+_0x29bb85(0xc2)};}const _0x455e10=0x12+_0x565678+0x1,_0x595495=_0x550bc2['slice'](_0x455e10,_0x455e10+0x2),_0x1731ad=new DataView(_0x595495)[_0x29bb85(0xde)](0x0);let _0x4268b3=_0x455e10+0x2;const _0x5cb5f2=new Uint8Array(_0x550bc2[_0x29bb85(0xf7)](_0x4268b3,_0x4268b3+0x1)),_0x59388e=_0x5cb5f2[0x0];let _0x356a35=0x0,_0x3e199a=_0x4268b3+0x1,_0x2093b2='';switch(_0x59388e){case 0x1:_0x356a35=0x4,_0x2093b2=new Uint8Array(_0x550bc2[_0x29bb85(0xf7)](_0x3e199a,_0x3e199a+_0x356a35))[_0x29bb85(0xc8)]('.');break;case 0x2:_0x356a35=new Uint8Array(_0x550bc2[_0x29bb85(0xf7)](_0x3e199a,_0x3e199a+0x1))[0x0],_0x3e199a+=0x1,_0x2093b2=new TextDecoder()[_0x29bb85(0xf1)](_0x550bc2['slice'](_0x3e199a,_0x3e199a+_0x356a35));break;case 0x3:_0x356a35=0x10;const _0x55c0ae=new DataView(_0x550bc2[_0x29bb85(0xf7)](_0x3e199a,_0x3e199a+_0x356a35)),_0x3f207f=[];for(let _0x46286e=0x0;_0x46286e<0x8;_0x46286e++){_0x3f207f[_0x29bb85(0xdc)](_0x55c0ae['getUint16'](_0x46286e*0x2)[_0x29bb85(0xef)](0x10));}_0x2093b2=_0x3f207f[_0x29bb85(0xc8)](':');break;default:return{'hasError':!![],'message':'invild\x20\x20addressType\x20is\x20'+_0x59388e};}if(!_0x2093b2)return{'hasError':!![],'message':_0x29bb85(0xb6)+_0x59388e};return{'hasError':![],'addressRemote':_0x2093b2,'addressType':_0x59388e,'portRemote':_0x1731ad,'rawDataIndex':_0x3e199a+_0x356a35,'vlessVersion':_0x39e546,'isUDP':_0x943e2a};}async function remoteSocketToWS(_0xc0f816,_0x4eb99f,_0x515d0c,_0x5f2949,_0x4edf11){const _0x11d210=_0x5cb642;let _0x1a423d=0x0,_0x5c5917=[],_0x304fa8=_0x515d0c,_0x5c7513=![];await _0xc0f816['readable'][_0x11d210(0xcc)](new WritableStream({'start'(){},async 'write'(_0x386038,_0x4b4d3c){const _0x593c51=_0x11d210;_0x5c7513=!![],_0x4eb99f[_0x593c51(0xb7)]!==WS_READY_STATE_OPEN&&_0x4b4d3c[_0x593c51(0xfd)](_0x593c51(0xeb)),_0x304fa8?(_0x4eb99f['send'](await new Blob([_0x304fa8,_0x386038])['arrayBuffer']()),_0x304fa8=null):_0x4eb99f['send'](_0x386038);},'close'(){const _0x3bb5ab=_0x11d210;_0x4edf11(_0x3bb5ab(0xcb)+_0x5c7513);},'abort'(_0x665216){const _0x3e0fee=_0x11d210;console[_0x3e0fee(0xfd)](_0x3e0fee(0xf5),_0x665216);}}))[_0x11d210(0xdd)](_0x25ef22=>{const _0x133917=_0x11d210;console['error'](_0x133917(0xd4),_0x25ef22[_0x133917(0xc5)]||_0x25ef22),safeCloseWebSocket(_0x4eb99f);}),_0x5c7513===![]&&_0x5f2949&&(_0x4edf11(_0x11d210(0xbe)),_0x5f2949());}function base64ToArrayBuffer(_0x53bc25){const _0x3b3c71=_0x5cb642;if(!_0x53bc25)return{'error':null};try{_0x53bc25=_0x53bc25[_0x3b3c71(0xd3)](/-/g,'+')[_0x3b3c71(0xd3)](/_/g,'/');const _0x2e64d9=atob(_0x53bc25),_0x2a2e18=Uint8Array[_0x3b3c71(0xd5)](_0x2e64d9,_0x10bd62=>_0x10bd62[_0x3b3c71(0xcd)](0x0));return{'earlyData':_0x2a2e18[_0x3b3c71(0xed)],'error':null};}catch(_0x487ce8){return{'error':_0x487ce8};}}const WS_READY_STATE_OPEN=0x1,WS_READY_STATE_CLOSING=0x2;function safeCloseWebSocket(_0x300d4e){const _0x52a5df=_0x5cb642;try{(_0x300d4e[_0x52a5df(0xb7)]===WS_READY_STATE_OPEN||_0x300d4e[_0x52a5df(0xb7)]===WS_READY_STATE_CLOSING)&&_0x300d4e[_0x52a5df(0xb2)]();}catch(_0x36a16e){console['error']('safeCloseWebSocket\x20error',_0x36a16e);}}function _0x223c(_0x52d159,_0x2838dd){const _0x5d3b46=_0x5d3b();return _0x223c=function(_0x223c67,_0x2ad41f){_0x223c67=_0x223c67-0xb2;let _0x4136cc=_0x5d3b46[_0x223c67];return _0x4136cc;},_0x223c(_0x52d159,_0x2838dd);}async function handleUDPOutBound(_0x16ff9a,_0x1b8d2c,_0x26adb2){const _0x5dd39b=_0x5cb642;let _0xc96093=![];const _0x3fc965=new TransformStream({'start'(_0x4f61d5){},'transform'(_0x12de7a,_0x373a1a){const _0x336a43=_0x223c;for(let _0x50d98c=0x0;_0x50d98c<_0x12de7a[_0x336a43(0xd1)];){const _0x3a6f17=_0x12de7a[_0x336a43(0xf7)](_0x50d98c,_0x50d98c+0x2),_0x259f56=new DataView(_0x3a6f17)['getUint16'](0x0),_0x1e0d94=new Uint8Array(_0x12de7a[_0x336a43(0xf7)](_0x50d98c+0x2,_0x50d98c+0x2+_0x259f56));_0x50d98c=_0x50d98c+0x2+_0x259f56,_0x373a1a['enqueue'](_0x1e0d94);}},'flush'(_0x4b8457){}});_0x3fc965[_0x5dd39b(0xbf)][_0x5dd39b(0xcc)](new WritableStream({async 'write'(_0x164de4){const _0x22cfb9=_0x5dd39b,_0x486efe=await fetch(_0x22cfb9(0xd7),{'method':'POST','headers':{'content-type':_0x22cfb9(0xc9)},'body':_0x164de4}),_0x2a1a04=await _0x486efe[_0x22cfb9(0xd8)](),_0x59bb49=_0x2a1a04[_0x22cfb9(0xd1)],_0x2f1942=new Uint8Array([_0x59bb49>>0x8&0xff,_0x59bb49&0xff]);_0x16ff9a[_0x22cfb9(0xb7)]===WS_READY_STATE_OPEN&&(_0x26adb2('doh\x20success\x20and\x20dns\x20message\x20length\x20is\x20'+_0x59bb49),_0xc96093?_0x16ff9a[_0x22cfb9(0xca)](await new Blob([_0x2f1942,_0x2a1a04])[_0x22cfb9(0xd8)]()):(_0x16ff9a['send'](await new Blob([_0x1b8d2c,_0x2f1942,_0x2a1a04])['arrayBuffer']()),_0xc96093=!![]));}}))[_0x5dd39b(0xdd)](_0x501e56=>{_0x26adb2('dns\x20udp\x20has\x20error'+_0x501e56);});const _0x4d2131=_0x3fc965['writable']['getWriter']();return{'write'(_0x5f0ea3){const _0x1bf453=_0x5dd39b;_0x4d2131[_0x1bf453(0x100)](_0x5f0ea3);}};}
